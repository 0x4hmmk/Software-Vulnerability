import socket
from struct import pack,unpack
import telnetlib
import sys
# Connect
BUFFER = 4096
LOCAL = ("localhost",2222)
SERVER = ('chall.pwnable.tw',10103)
s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
DEBUG = True

# If debug is True, program will print log and connect Local
if sys.argv[1] == '0':
	s.connect(LOCAL)
else:
	s.connect(SERVER)
	DEBUG = False


def sendline(data):
	s.send(data + "\n")
def p32(data):
	return pack("<I",data)
def recv_until(str):
	recv_ = ''
	while not str in recv_:
		tmp = s.recv(BUFFER)
		recv_ += tmp
		if DEBUG:
			print tmp
		continue
	return recv_



t = telnetlib.Telnet()
t.sock = s
t.interact()
s.close()
